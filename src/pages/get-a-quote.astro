---
import HeroBackground from '../components/HeroBackground.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Get a Free Quote | Nationwide Cleaning Services Limited"
  description="Request a free, no-obligation cleaning quote. Fill out our simple form and we'll get back to you with a personalized quote for your cleaning needs."
>
  <!-- Hero with Background Slideshow -->
  <section class="relative bg-gradient-to-br from-navy to-navy/95 text-white py-16 overflow-hidden">
    <HeroBackground />
    
    <div class="container mx-auto px-4 lg:px-8 relative z-10">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="font-display text-4xl md:text-5xl font-bold mb-6">Get Your Free Quote</h1>
        <p class="text-xl text-gray-200">
          Tell us about your cleaning needs and we'll provide a tailored, no-obligation quote within 24 hours.
        </p>
      </div>
    </div>
  </section>

  <!-- Form Section -->
  <section class="py-20">
    <div class="container mx-auto px-4 lg:px-8">
      <div class="max-w-3xl mx-auto">
        <!-- Form Instructions -->
        <div class="bg-green/5 border border-green/20 rounded-xl p-6 mb-8">
          <div class="flex gap-4">
            <div class="flex-shrink-0">
              <svg class="w-6 h-6 text-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 class="font-semibold text-navy mb-2">How it works</h3>
              <ul class="text-sm text-gray-600 space-y-1">
                <li>• Fill out the form below with details about your cleaning needs</li>
                <li>• We'll review your request and prepare a personalized quote</li>
                <li>• Receive your free, no-obligation quote within 24 hours</li>
                <li>• Book your cleaning service at a time that suits you</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Quote Form -->
        <form id="quote-form" class="bg-white border-2 border-gray-200 rounded-2xl p-8 space-y-6">
          <!-- Success Message (hidden by default) -->
          <div id="success-message" class="hidden bg-green/10 border border-green/30 rounded-lg p-6 mb-6">
            <div class="flex gap-3">
              <svg class="w-6 h-6 text-green flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <div>
                <h3 class="font-semibold text-green mb-1">Quote Request Received!</h3>
                <p class="text-sm text-gray-700">Thank you for your interest. We'll review your request and send you a personalized quote within 24 hours.</p>
              </div>
            </div>
          </div>

          <!-- Personal Details -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="name" class="block text-sm font-semibold text-navy mb-2">
                Full Name <span class="text-red-500">*</span>
              </label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required
                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors"
                placeholder="John Smith"
              />
            </div>

            <div>
              <label for="phone" class="block text-sm font-semibold text-navy mb-2">
                Phone Number <span class="text-red-500">*</span>
              </label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                required
                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors"
                placeholder="07XXX XXXXXX"
              />
            </div>
          </div>

          <div>
            <label for="email" class="block text-sm font-semibold text-navy mb-2">
              Email Address <span class="text-red-500">*</span>
            </label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              required
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors"
              placeholder="john.smith@example.com"
            />
          </div>

          <div>
            <label for="postcode" class="block text-sm font-semibold text-navy mb-2">
              Postcode <span class="text-red-500">*</span>
            </label>
            <input 
              type="text" 
              id="postcode" 
              name="postcode" 
              required
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors"
              placeholder="FK8 1AA"
            />
          </div>

          <!-- Service Details -->
          <div class="border-t border-gray-200 pt-6">
            <h3 class="font-display text-xl font-semibold text-navy mb-6">Service Details</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="service-type" class="block text-sm font-semibold text-navy mb-2">
                  Service Type <span class="text-red-500">*</span>
                </label>
                <select 
                  id="service-type" 
                  name="service-type" 
                  required
                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors appearance-none bg-white"
                >
                  <option value="">Select a service...</option>
                  <option value="regular-house-cleaning">Regular House Cleaning</option>
                  <option value="commercial-cleaning">Commercial Cleaning</option>
                  <option value="move-in-out-cleaning">Move In / Move Out Cleaning</option>
                  <option value="office-warehouse-cleaning">Office & Warehouse Cleaning</option>
                  <option value="carpet-upholstery-cleaning">Carpet & Upholstery Cleaning</option>
                  <option value="eco-friendly-cleaning">Eco-Friendly Cleaning</option>
                  <option value="other">Other / Not Sure</option>
                </select>
              </div>

              <div>
                <label for="property-type" class="block text-sm font-semibold text-navy mb-2">
                  Property Type <span class="text-red-500">*</span>
                </label>
                <select 
                  id="property-type" 
                  name="property-type" 
                  required
                  class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors appearance-none bg-white"
                >
                  <option value="">Select type...</option>
                  <option value="residential-home">Residential Home</option>
                  <option value="flat-apartment">Flat / Apartment</option>
                  <option value="office">Office</option>
                  <option value="warehouse">Warehouse</option>
                  <option value="retail">Retail Space</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>

            <div class="mt-6">
              <label for="frequency" class="block text-sm font-semibold text-navy mb-2">
                Cleaning Frequency <span class="text-red-500">*</span>
              </label>
              <select 
                id="frequency" 
                name="frequency" 
                required
                class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors appearance-none bg-white"
              >
                <option value="">Select frequency...</option>
                <option value="one-off">One-Off Clean</option>
                <option value="weekly">Weekly</option>
                <option value="fortnightly">Fortnightly</option>
                <option value="monthly">Monthly</option>
                <option value="custom">Custom Schedule</option>
              </select>
            </div>
          </div>

          <!-- Additional Information -->
          <div>
            <label for="message" class="block text-sm font-semibold text-navy mb-2">
              Additional Details (Optional)
            </label>
            <textarea 
              id="message" 
              name="message" 
              rows="5"
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-green focus:outline-none transition-colors resize-none"
              placeholder="Tell us more about your cleaning needs, property size, special requirements, or any questions you have..."
            ></textarea>
          </div>

          <!-- Honeypot for spam protection -->
          <input type="text" name="_gotcha" style="display:none" />

          <!-- Submit Button -->
          <div class="flex gap-4">
            <button 
              type="submit" 
              class="flex-1 bg-green hover:bg-green/90 text-white px-8 py-4 rounded-lg font-semibold text-lg transition-all hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
              id="submit-btn"
            >
              <span id="submit-text">Request Free Quote</span>
              <span id="submit-loading" class="hidden">Sending...</span>
            </button>
          </div>

          <p class="text-xs text-gray-500 text-center">
            By submitting this form, you agree to be contacted regarding your quote request. 
            We respect your privacy and will never share your information.
          </p>
        </form>

        <!-- Alternative Contact -->
        <div class="mt-12 text-center">
          <p class="text-gray-600 mb-4">Prefer to speak with us directly?</p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="tel:07836671796" class="inline-flex items-center justify-center bg-navy hover:bg-navy/90 text-white px-6 py-3 rounded-lg font-semibold transition-all">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              Call 07836 671796
            </a>
            <a href="mailto:hello@nationwidecleaningserviceslimited.co.uk" class="inline-flex items-center justify-center bg-white hover:bg-gray-50 border-2 border-gray-200 text-navy px-6 py-3 rounded-lg font-semibold transition-all">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              Email Us
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    const form = document.getElementById('quote-form') as HTMLFormElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
    const submitText = document.getElementById('submit-text') as HTMLSpanElement;
    const submitLoading = document.getElementById('submit-loading') as HTMLSpanElement;
    const successMessage = document.getElementById('success-message') as HTMLDivElement;

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Disable submit button
      submitBtn.disabled = true;
      submitText.classList.add('hidden');
      submitLoading.classList.remove('hidden');
      
      const formData = new FormData(form);
      
      try {
        // TODO: Replace with your Formspree endpoint or other form handler
        // Example: const response = await fetch('https://formspree.io/f/YOUR_FORM_ID', {
        const response = await fetch('YOUR_FORMSPREE_ENDPOINT_HERE', {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          // Show success message
          successMessage.classList.remove('hidden');
          form.reset();
          
          // Scroll to success message
          successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
          alert('There was a problem submitting your request. Please try calling us instead.');
        }
      } catch (error) {
        alert('There was a problem submitting your request. Please try calling us instead.');
      } finally {
        // Re-enable submit button
        submitBtn.disabled = false;
        submitText.classList.remove('hidden');
        submitLoading.classList.add('hidden');
      }
    });
  </script>

  <style>
    select {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 0.5rem center;
      background-repeat: no-repeat;
      background-size: 1.5em 1.5em;
      padding-right: 2.5rem;
    }
  </style>
</BaseLayout>
